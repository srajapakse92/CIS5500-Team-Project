{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"className\", \"style\", \"prefix\", \"split\", \"notFoundContent\", \"value\", \"defaultValue\", \"children\", \"open\", \"validateSearch\", \"filterOption\", \"onChange\", \"onKeyDown\", \"onKeyUp\", \"onPressEnter\", \"onSearch\", \"onSelect\", \"onFocus\", \"onBlur\", \"transitionName\", \"placement\", \"direction\", \"getPopupContainer\", \"dropdownClassName\"];\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport toArray from \"rc-util/es/Children/toArray\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { useState, useRef } from 'react';\nimport TextArea from 'rc-textarea';\nimport KeywordTrigger from './KeywordTrigger';\nimport MentionsContext from './MentionsContext';\nimport Option from './Option';\nimport { filterOption as defaultFilterOption, getBeforeSelectionText, getLastMeasureIndex, replaceWithMeasure, setInputSelection, validateSearch as defaultValidateSearch } from './util';\nimport useEffectState from './hooks/useEffectState';\nvar Mentions = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n      className = props.className,\n      style = props.style,\n      prefix = props.prefix,\n      split = props.split,\n      notFoundContent = props.notFoundContent,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      children = props.children,\n      open = props.open,\n      validateSearch = props.validateSearch,\n      filterOption = props.filterOption,\n      onChange = props.onChange,\n      onKeyDown = props.onKeyDown,\n      onKeyUp = props.onKeyUp,\n      onPressEnter = props.onPressEnter,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      transitionName = props.transitionName,\n      placement = props.placement,\n      direction = props.direction,\n      getPopupContainer = props.getPopupContainer,\n      dropdownClassName = props.dropdownClassName,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var mergedPrefix = Array.isArray(prefix) ? prefix : [prefix];\n\n  var mergedProps = _objectSpread(_objectSpread({}, props), {}, {\n    prefix: mergedPrefix\n  }); // =============================== Refs ===============================\n\n\n  var textareaRef = useRef(null);\n  var measureRef = useRef(null);\n  React.useImperativeHandle(ref, function () {\n    return {\n      focus: function focus() {\n        var _textareaRef$current;\n\n        return (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : _textareaRef$current.focus();\n      },\n      blur: function blur() {\n        var _textareaRef$current2;\n\n        return (_textareaRef$current2 = textareaRef.current) === null || _textareaRef$current2 === void 0 ? void 0 : _textareaRef$current2.blur();\n      }\n    };\n  }); // ============================== State ===============================\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      measuring = _useState2[0],\n      setMeasuring = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      measureText = _useState4[0],\n      setMeasureText = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      measurePrefix = _useState6[0],\n      setMeasurePrefix = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      measureLocation = _useState8[0],\n      setMeasureLocation = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activeIndex = _useState10[0],\n      setActiveIndex = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isFocus = _useState12[0],\n      setIsFocus = _useState12[1]; // ============================== Value ===============================\n\n\n  var _useMergedState = useMergedState('', {\n    defaultValue: defaultValue,\n    value: value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedValue = _useMergedState2[0],\n      setMergedValue = _useMergedState2[1]; // =============================== Open ===============================\n\n\n  var _React$useMemo = React.useMemo(function () {\n    if (open) {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, '`open` of Mentions is only used for debug usage. Do not use in you production.');\n      }\n\n      for (var i = 0; i < mergedPrefix.length; i += 1) {\n        var curPrefix = mergedPrefix[i];\n        var index = mergedValue.lastIndexOf(curPrefix);\n\n        if (index >= 0) {\n          return [true, '', curPrefix, index];\n        }\n      }\n    }\n\n    return [measuring, measureText, measurePrefix, measureLocation];\n  }, [open, measuring, mergedPrefix, mergedValue, measureText, measurePrefix, measureLocation]),\n      _React$useMemo2 = _slicedToArray(_React$useMemo, 4),\n      mergedMeasuring = _React$useMemo2[0],\n      mergedMeasureText = _React$useMemo2[1],\n      mergedMeasurePrefix = _React$useMemo2[2],\n      mergedMeasureLocation = _React$useMemo2[3]; // ============================== Option ==============================\n\n\n  var getOptions = React.useCallback(function (targetMeasureText) {\n    var list = toArray(children).map(function (_ref) {\n      var optionProps = _ref.props,\n          key = _ref.key;\n      return _objectSpread(_objectSpread({}, optionProps), {}, {\n        key: key || optionProps.value\n      });\n    }).filter(function (option) {\n      /** Return all result if `filterOption` is false. */\n      if (filterOption === false) {\n        return true;\n      }\n\n      return filterOption(targetMeasureText, option);\n    });\n    return list;\n  }, [children, filterOption]);\n  var options = React.useMemo(function () {\n    return getOptions(mergedMeasureText);\n  }, [getOptions, mergedMeasureText]); // ============================= Measure ==============================\n  // Mark that we will reset input selection to target position when user select option\n\n  var onSelectionEffect = useEffectState();\n\n  var startMeasure = function startMeasure(nextMeasureText, nextMeasurePrefix, nextMeasureLocation) {\n    setMeasuring(true);\n    setMeasureText(nextMeasureText);\n    setMeasurePrefix(nextMeasurePrefix);\n    setMeasureLocation(nextMeasureLocation);\n    setActiveIndex(0);\n  };\n\n  var stopMeasure = function stopMeasure(callback) {\n    setMeasuring(false);\n    setMeasureLocation(0);\n    setMeasureText('');\n    onSelectionEffect(callback);\n  }; // ============================== Change ==============================\n\n\n  var triggerChange = function triggerChange(nextValue) {\n    setMergedValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue);\n  };\n\n  var onInternalChange = function onInternalChange(_ref2) {\n    var nextValue = _ref2.target.value;\n    triggerChange(nextValue);\n  };\n\n  var selectOption = function selectOption(option) {\n    var _getTextArea;\n\n    var getTextArea = function getTextArea() {\n      var _textareaRef$current3, _textareaRef$current4;\n\n      return (_textareaRef$current3 = textareaRef.current) === null || _textareaRef$current3 === void 0 ? void 0 : (_textareaRef$current4 = _textareaRef$current3.resizableTextArea) === null || _textareaRef$current4 === void 0 ? void 0 : _textareaRef$current4.textArea;\n    };\n\n    var _option$value = option.value,\n        mentionValue = _option$value === void 0 ? '' : _option$value;\n\n    var _replaceWithMeasure = replaceWithMeasure(mergedValue, {\n      measureLocation: mergedMeasureLocation,\n      targetText: mentionValue,\n      prefix: mergedMeasurePrefix,\n      selectionStart: (_getTextArea = getTextArea()) === null || _getTextArea === void 0 ? void 0 : _getTextArea.selectionStart,\n      split: split\n    }),\n        text = _replaceWithMeasure.text,\n        selectionLocation = _replaceWithMeasure.selectionLocation;\n\n    triggerChange(text);\n    stopMeasure(function () {\n      // We need restore the selection position\n      setInputSelection(getTextArea(), selectionLocation);\n    });\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(option, mergedMeasurePrefix);\n  }; // ============================= KeyEvent =============================\n  // Check if hit the measure keyword\n\n\n  var onInternalKeyDown = function onInternalKeyDown(event) {\n    var which = event.which;\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event); // Skip if not measuring\n\n    if (!mergedMeasuring) {\n      return;\n    }\n\n    if (which === KeyCode.UP || which === KeyCode.DOWN) {\n      // Control arrow function\n      var optionLen = options.length;\n      var offset = which === KeyCode.UP ? -1 : 1;\n      var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n      setActiveIndex(newActiveIndex);\n      event.preventDefault();\n    } else if (which === KeyCode.ESC) {\n      stopMeasure();\n    } else if (which === KeyCode.ENTER) {\n      // Measure hit\n      event.preventDefault();\n\n      if (!options.length) {\n        stopMeasure();\n        return;\n      }\n\n      var option = options[activeIndex];\n      selectOption(option);\n    }\n  };\n  /**\n   * When to start measure:\n   * 1. When user press `prefix`\n   * 2. When measureText !== prevMeasureText\n   *  - If measure hit\n   *  - If measuring\n   *\n   * When to stop measure:\n   * 1. Selection is out of range\n   * 2. Contains `space`\n   * 3. ESC or select one\n   */\n\n\n  var onInternalKeyUp = function onInternalKeyUp(event) {\n    var key = event.key,\n        which = event.which;\n    var target = event.target;\n    var selectionStartText = getBeforeSelectionText(target);\n\n    var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, mergedPrefix),\n        measureIndex = _getLastMeasureIndex.location,\n        nextMeasurePrefix = _getLastMeasureIndex.prefix; // If the client implements an onKeyUp handler, call it\n\n\n    onKeyUp === null || onKeyUp === void 0 ? void 0 : onKeyUp(event); // Skip if match the white key list\n\n    if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n      return;\n    }\n\n    if (measureIndex !== -1) {\n      var nextMeasureText = selectionStartText.slice(measureIndex + nextMeasurePrefix.length);\n      var validateMeasure = validateSearch(nextMeasureText, mergedProps);\n      var matchOption = !!getOptions(nextMeasureText).length;\n\n      if (validateMeasure) {\n        if (key === nextMeasurePrefix || key === 'Shift' || mergedMeasuring || nextMeasureText !== mergedMeasureText && matchOption) {\n          startMeasure(nextMeasureText, nextMeasurePrefix, measureIndex);\n        }\n      } else if (mergedMeasuring) {\n        // Stop if measureText is invalidate\n        stopMeasure();\n      }\n      /**\n       * We will trigger `onSearch` to developer since they may use for async update.\n       * If met `space` means user finished searching.\n       */\n\n\n      if (onSearch && validateMeasure) {\n        onSearch(nextMeasureText, nextMeasurePrefix);\n      }\n    } else if (mergedMeasuring) {\n      stopMeasure();\n    }\n  };\n\n  var onInternalPressEnter = function onInternalPressEnter(event) {\n    if (!mergedMeasuring && onPressEnter) {\n      onPressEnter(event);\n    }\n  }; // ============================ Focus Blur ============================\n\n\n  var focusRef = useRef();\n\n  var onInternalFocus = function onInternalFocus(event) {\n    window.clearTimeout(focusRef.current);\n\n    if (!isFocus && event && onFocus) {\n      onFocus(event);\n    }\n\n    setIsFocus(true);\n  };\n\n  var onInternalBlur = function onInternalBlur(event) {\n    focusRef.current = window.setTimeout(function () {\n      setIsFocus(false);\n      stopMeasure();\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n    }, 0);\n  };\n\n  var onDropdownFocus = function onDropdownFocus() {\n    onInternalFocus();\n  };\n\n  var onDropdownBlur = function onDropdownBlur() {\n    onInternalBlur();\n  }; // ============================== Render ==============================\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(prefixCls, className),\n    style: style\n  }, /*#__PURE__*/React.createElement(TextArea, _extends({\n    ref: textareaRef,\n    value: mergedValue\n  }, restProps, {\n    onChange: onInternalChange,\n    onKeyDown: onInternalKeyDown,\n    onKeyUp: onInternalKeyUp,\n    onPressEnter: onInternalPressEnter,\n    onFocus: onInternalFocus,\n    onBlur: onInternalBlur\n  })), mergedMeasuring && /*#__PURE__*/React.createElement(\"div\", {\n    ref: measureRef,\n    className: \"\".concat(prefixCls, \"-measure\")\n  }, mergedValue.slice(0, mergedMeasureLocation), /*#__PURE__*/React.createElement(MentionsContext.Provider, {\n    value: {\n      notFoundContent: notFoundContent,\n      activeIndex: activeIndex,\n      setActiveIndex: setActiveIndex,\n      selectOption: selectOption,\n      onFocus: onDropdownFocus,\n      onBlur: onDropdownBlur\n    }\n  }, /*#__PURE__*/React.createElement(KeywordTrigger, {\n    prefixCls: prefixCls,\n    transitionName: transitionName,\n    placement: placement,\n    direction: direction,\n    options: options,\n    visible: true,\n    getPopupContainer: getPopupContainer,\n    dropdownClassName: dropdownClassName\n  }, /*#__PURE__*/React.createElement(\"span\", null, mergedMeasurePrefix))), mergedValue.slice(mergedMeasureLocation + mergedMeasurePrefix.length)));\n});\nMentions.defaultProps = {\n  prefixCls: 'rc-mentions',\n  prefix: '@',\n  split: ' ',\n  validateSearch: defaultValidateSearch,\n  filterOption: defaultFilterOption,\n  notFoundContent: 'Not Found',\n  rows: 1\n};\nMentions.Option = Option;\nexport default Mentions;","map":{"version":3,"sources":["/Users/derek/MCIT/550/Project/CIS5500-Team-Project/tube-db/client/node_modules/rc-mentions/es/Mentions.js"],"names":["_extends","_slicedToArray","_objectSpread","_objectWithoutProperties","_excluded","classNames","useMergedState","toArray","KeyCode","warning","React","useState","useRef","TextArea","KeywordTrigger","MentionsContext","Option","filterOption","defaultFilterOption","getBeforeSelectionText","getLastMeasureIndex","replaceWithMeasure","setInputSelection","validateSearch","defaultValidateSearch","useEffectState","Mentions","forwardRef","props","ref","prefixCls","className","style","prefix","split","notFoundContent","value","defaultValue","children","open","onChange","onKeyDown","onKeyUp","onPressEnter","onSearch","onSelect","onFocus","onBlur","transitionName","placement","direction","getPopupContainer","dropdownClassName","restProps","mergedPrefix","Array","isArray","mergedProps","textareaRef","measureRef","useImperativeHandle","focus","_textareaRef$current","current","blur","_textareaRef$current2","_useState","_useState2","measuring","setMeasuring","_useState3","_useState4","measureText","setMeasureText","_useState5","_useState6","measurePrefix","setMeasurePrefix","_useState7","_useState8","measureLocation","setMeasureLocation","_useState9","_useState10","activeIndex","setActiveIndex","_useState11","_useState12","isFocus","setIsFocus","_useMergedState","_useMergedState2","mergedValue","setMergedValue","_React$useMemo","useMemo","process","env","NODE_ENV","i","length","curPrefix","index","lastIndexOf","_React$useMemo2","mergedMeasuring","mergedMeasureText","mergedMeasurePrefix","mergedMeasureLocation","getOptions","useCallback","targetMeasureText","list","map","_ref","optionProps","key","filter","option","options","onSelectionEffect","startMeasure","nextMeasureText","nextMeasurePrefix","nextMeasureLocation","stopMeasure","callback","triggerChange","nextValue","onInternalChange","_ref2","target","selectOption","_getTextArea","getTextArea","_textareaRef$current3","_textareaRef$current4","resizableTextArea","textArea","_option$value","mentionValue","_replaceWithMeasure","targetText","selectionStart","text","selectionLocation","onInternalKeyDown","event","which","UP","DOWN","optionLen","offset","newActiveIndex","preventDefault","ESC","ENTER","onInternalKeyUp","selectionStartText","_getLastMeasureIndex","measureIndex","location","indexOf","slice","validateMeasure","matchOption","onInternalPressEnter","focusRef","onInternalFocus","window","clearTimeout","onInternalBlur","setTimeout","onDropdownFocus","onDropdownBlur","createElement","concat","Provider","visible","defaultProps","rows"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"prefixCls\", \"className\", \"style\", \"prefix\", \"split\", \"notFoundContent\", \"value\", \"defaultValue\", \"children\", \"open\", \"validateSearch\", \"filterOption\", \"onChange\", \"onKeyDown\", \"onKeyUp\", \"onPressEnter\", \"onSearch\", \"onSelect\", \"onFocus\", \"onBlur\", \"transitionName\", \"placement\", \"direction\", \"getPopupContainer\", \"dropdownClassName\"];\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport toArray from \"rc-util/es/Children/toArray\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport warning from \"rc-util/es/warning\";\nimport * as React from 'react';\nimport { useState, useRef } from 'react';\nimport TextArea from 'rc-textarea';\nimport KeywordTrigger from './KeywordTrigger';\nimport MentionsContext from './MentionsContext';\nimport Option from './Option';\nimport { filterOption as defaultFilterOption, getBeforeSelectionText, getLastMeasureIndex, replaceWithMeasure, setInputSelection, validateSearch as defaultValidateSearch } from './util';\nimport useEffectState from './hooks/useEffectState';\nvar Mentions = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n      className = props.className,\n      style = props.style,\n      prefix = props.prefix,\n      split = props.split,\n      notFoundContent = props.notFoundContent,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      children = props.children,\n      open = props.open,\n      validateSearch = props.validateSearch,\n      filterOption = props.filterOption,\n      onChange = props.onChange,\n      onKeyDown = props.onKeyDown,\n      onKeyUp = props.onKeyUp,\n      onPressEnter = props.onPressEnter,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onFocus = props.onFocus,\n      onBlur = props.onBlur,\n      transitionName = props.transitionName,\n      placement = props.placement,\n      direction = props.direction,\n      getPopupContainer = props.getPopupContainer,\n      dropdownClassName = props.dropdownClassName,\n      restProps = _objectWithoutProperties(props, _excluded);\n\n  var mergedPrefix = Array.isArray(prefix) ? prefix : [prefix];\n\n  var mergedProps = _objectSpread(_objectSpread({}, props), {}, {\n    prefix: mergedPrefix\n  }); // =============================== Refs ===============================\n\n\n  var textareaRef = useRef(null);\n  var measureRef = useRef(null);\n  React.useImperativeHandle(ref, function () {\n    return {\n      focus: function focus() {\n        var _textareaRef$current;\n\n        return (_textareaRef$current = textareaRef.current) === null || _textareaRef$current === void 0 ? void 0 : _textareaRef$current.focus();\n      },\n      blur: function blur() {\n        var _textareaRef$current2;\n\n        return (_textareaRef$current2 = textareaRef.current) === null || _textareaRef$current2 === void 0 ? void 0 : _textareaRef$current2.blur();\n      }\n    };\n  }); // ============================== State ===============================\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      measuring = _useState2[0],\n      setMeasuring = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      measureText = _useState4[0],\n      setMeasureText = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      measurePrefix = _useState6[0],\n      setMeasurePrefix = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      measureLocation = _useState8[0],\n      setMeasureLocation = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activeIndex = _useState10[0],\n      setActiveIndex = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isFocus = _useState12[0],\n      setIsFocus = _useState12[1]; // ============================== Value ===============================\n\n\n  var _useMergedState = useMergedState('', {\n    defaultValue: defaultValue,\n    value: value\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      mergedValue = _useMergedState2[0],\n      setMergedValue = _useMergedState2[1]; // =============================== Open ===============================\n\n\n  var _React$useMemo = React.useMemo(function () {\n    if (open) {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, '`open` of Mentions is only used for debug usage. Do not use in you production.');\n      }\n\n      for (var i = 0; i < mergedPrefix.length; i += 1) {\n        var curPrefix = mergedPrefix[i];\n        var index = mergedValue.lastIndexOf(curPrefix);\n\n        if (index >= 0) {\n          return [true, '', curPrefix, index];\n        }\n      }\n    }\n\n    return [measuring, measureText, measurePrefix, measureLocation];\n  }, [open, measuring, mergedPrefix, mergedValue, measureText, measurePrefix, measureLocation]),\n      _React$useMemo2 = _slicedToArray(_React$useMemo, 4),\n      mergedMeasuring = _React$useMemo2[0],\n      mergedMeasureText = _React$useMemo2[1],\n      mergedMeasurePrefix = _React$useMemo2[2],\n      mergedMeasureLocation = _React$useMemo2[3]; // ============================== Option ==============================\n\n\n  var getOptions = React.useCallback(function (targetMeasureText) {\n    var list = toArray(children).map(function (_ref) {\n      var optionProps = _ref.props,\n          key = _ref.key;\n      return _objectSpread(_objectSpread({}, optionProps), {}, {\n        key: key || optionProps.value\n      });\n    }).filter(function (option) {\n      /** Return all result if `filterOption` is false. */\n      if (filterOption === false) {\n        return true;\n      }\n\n      return filterOption(targetMeasureText, option);\n    });\n    return list;\n  }, [children, filterOption]);\n  var options = React.useMemo(function () {\n    return getOptions(mergedMeasureText);\n  }, [getOptions, mergedMeasureText]); // ============================= Measure ==============================\n  // Mark that we will reset input selection to target position when user select option\n\n  var onSelectionEffect = useEffectState();\n\n  var startMeasure = function startMeasure(nextMeasureText, nextMeasurePrefix, nextMeasureLocation) {\n    setMeasuring(true);\n    setMeasureText(nextMeasureText);\n    setMeasurePrefix(nextMeasurePrefix);\n    setMeasureLocation(nextMeasureLocation);\n    setActiveIndex(0);\n  };\n\n  var stopMeasure = function stopMeasure(callback) {\n    setMeasuring(false);\n    setMeasureLocation(0);\n    setMeasureText('');\n    onSelectionEffect(callback);\n  }; // ============================== Change ==============================\n\n\n  var triggerChange = function triggerChange(nextValue) {\n    setMergedValue(nextValue);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue);\n  };\n\n  var onInternalChange = function onInternalChange(_ref2) {\n    var nextValue = _ref2.target.value;\n    triggerChange(nextValue);\n  };\n\n  var selectOption = function selectOption(option) {\n    var _getTextArea;\n\n    var getTextArea = function getTextArea() {\n      var _textareaRef$current3, _textareaRef$current4;\n\n      return (_textareaRef$current3 = textareaRef.current) === null || _textareaRef$current3 === void 0 ? void 0 : (_textareaRef$current4 = _textareaRef$current3.resizableTextArea) === null || _textareaRef$current4 === void 0 ? void 0 : _textareaRef$current4.textArea;\n    };\n\n    var _option$value = option.value,\n        mentionValue = _option$value === void 0 ? '' : _option$value;\n\n    var _replaceWithMeasure = replaceWithMeasure(mergedValue, {\n      measureLocation: mergedMeasureLocation,\n      targetText: mentionValue,\n      prefix: mergedMeasurePrefix,\n      selectionStart: (_getTextArea = getTextArea()) === null || _getTextArea === void 0 ? void 0 : _getTextArea.selectionStart,\n      split: split\n    }),\n        text = _replaceWithMeasure.text,\n        selectionLocation = _replaceWithMeasure.selectionLocation;\n\n    triggerChange(text);\n    stopMeasure(function () {\n      // We need restore the selection position\n      setInputSelection(getTextArea(), selectionLocation);\n    });\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(option, mergedMeasurePrefix);\n  }; // ============================= KeyEvent =============================\n  // Check if hit the measure keyword\n\n\n  var onInternalKeyDown = function onInternalKeyDown(event) {\n    var which = event.which;\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event); // Skip if not measuring\n\n    if (!mergedMeasuring) {\n      return;\n    }\n\n    if (which === KeyCode.UP || which === KeyCode.DOWN) {\n      // Control arrow function\n      var optionLen = options.length;\n      var offset = which === KeyCode.UP ? -1 : 1;\n      var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n      setActiveIndex(newActiveIndex);\n      event.preventDefault();\n    } else if (which === KeyCode.ESC) {\n      stopMeasure();\n    } else if (which === KeyCode.ENTER) {\n      // Measure hit\n      event.preventDefault();\n\n      if (!options.length) {\n        stopMeasure();\n        return;\n      }\n\n      var option = options[activeIndex];\n      selectOption(option);\n    }\n  };\n  /**\n   * When to start measure:\n   * 1. When user press `prefix`\n   * 2. When measureText !== prevMeasureText\n   *  - If measure hit\n   *  - If measuring\n   *\n   * When to stop measure:\n   * 1. Selection is out of range\n   * 2. Contains `space`\n   * 3. ESC or select one\n   */\n\n\n  var onInternalKeyUp = function onInternalKeyUp(event) {\n    var key = event.key,\n        which = event.which;\n    var target = event.target;\n    var selectionStartText = getBeforeSelectionText(target);\n\n    var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, mergedPrefix),\n        measureIndex = _getLastMeasureIndex.location,\n        nextMeasurePrefix = _getLastMeasureIndex.prefix; // If the client implements an onKeyUp handler, call it\n\n\n    onKeyUp === null || onKeyUp === void 0 ? void 0 : onKeyUp(event); // Skip if match the white key list\n\n    if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n      return;\n    }\n\n    if (measureIndex !== -1) {\n      var nextMeasureText = selectionStartText.slice(measureIndex + nextMeasurePrefix.length);\n      var validateMeasure = validateSearch(nextMeasureText, mergedProps);\n      var matchOption = !!getOptions(nextMeasureText).length;\n\n      if (validateMeasure) {\n        if (key === nextMeasurePrefix || key === 'Shift' || mergedMeasuring || nextMeasureText !== mergedMeasureText && matchOption) {\n          startMeasure(nextMeasureText, nextMeasurePrefix, measureIndex);\n        }\n      } else if (mergedMeasuring) {\n        // Stop if measureText is invalidate\n        stopMeasure();\n      }\n      /**\n       * We will trigger `onSearch` to developer since they may use for async update.\n       * If met `space` means user finished searching.\n       */\n\n\n      if (onSearch && validateMeasure) {\n        onSearch(nextMeasureText, nextMeasurePrefix);\n      }\n    } else if (mergedMeasuring) {\n      stopMeasure();\n    }\n  };\n\n  var onInternalPressEnter = function onInternalPressEnter(event) {\n    if (!mergedMeasuring && onPressEnter) {\n      onPressEnter(event);\n    }\n  }; // ============================ Focus Blur ============================\n\n\n  var focusRef = useRef();\n\n  var onInternalFocus = function onInternalFocus(event) {\n    window.clearTimeout(focusRef.current);\n\n    if (!isFocus && event && onFocus) {\n      onFocus(event);\n    }\n\n    setIsFocus(true);\n  };\n\n  var onInternalBlur = function onInternalBlur(event) {\n    focusRef.current = window.setTimeout(function () {\n      setIsFocus(false);\n      stopMeasure();\n      onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n    }, 0);\n  };\n\n  var onDropdownFocus = function onDropdownFocus() {\n    onInternalFocus();\n  };\n\n  var onDropdownBlur = function onDropdownBlur() {\n    onInternalBlur();\n  }; // ============================== Render ==============================\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(prefixCls, className),\n    style: style\n  }, /*#__PURE__*/React.createElement(TextArea, _extends({\n    ref: textareaRef,\n    value: mergedValue\n  }, restProps, {\n    onChange: onInternalChange,\n    onKeyDown: onInternalKeyDown,\n    onKeyUp: onInternalKeyUp,\n    onPressEnter: onInternalPressEnter,\n    onFocus: onInternalFocus,\n    onBlur: onInternalBlur\n  })), mergedMeasuring && /*#__PURE__*/React.createElement(\"div\", {\n    ref: measureRef,\n    className: \"\".concat(prefixCls, \"-measure\")\n  }, mergedValue.slice(0, mergedMeasureLocation), /*#__PURE__*/React.createElement(MentionsContext.Provider, {\n    value: {\n      notFoundContent: notFoundContent,\n      activeIndex: activeIndex,\n      setActiveIndex: setActiveIndex,\n      selectOption: selectOption,\n      onFocus: onDropdownFocus,\n      onBlur: onDropdownBlur\n    }\n  }, /*#__PURE__*/React.createElement(KeywordTrigger, {\n    prefixCls: prefixCls,\n    transitionName: transitionName,\n    placement: placement,\n    direction: direction,\n    options: options,\n    visible: true,\n    getPopupContainer: getPopupContainer,\n    dropdownClassName: dropdownClassName\n  }, /*#__PURE__*/React.createElement(\"span\", null, mergedMeasurePrefix))), mergedValue.slice(mergedMeasureLocation + mergedMeasurePrefix.length)));\n});\nMentions.defaultProps = {\n  prefixCls: 'rc-mentions',\n  prefix: '@',\n  split: ' ',\n  validateSearch: defaultValidateSearch,\n  filterOption: defaultFilterOption,\n  notFoundContent: 'Not Found',\n  rows: 1\n};\nMentions.Option = Option;\nexport default Mentions;"]},"metadata":{},"sourceType":"module"}